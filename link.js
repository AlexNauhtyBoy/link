var cdxEditorLink=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,r){"use strict";e.exports=function(){function e(){var e=document.createElement("INPUT");return e.type="input",e.classList.add(s.inputElement),e.placeholder="Paste Link...",e}function t(){var e=document.createElement("DIV");return e.classList.add(s.linkHolder),e}function n(e){var r=t(),n=document.createElement("DIV"),o=document.createElement("IMG"),i=document.createElement("DIV"),l=document.createElement("A");return r.classList.add(s.linkHolder,s.holderWithSmallCover),r.dataset.style="smallCover",o.src=e.image,o.classList.add(s.cover,s.smallCover),n.textContent=e.title,n.classList.add(s.embedTitle),i.textContent=e.description,i.classList.add(s.description),l.textContent=e.linkText,l.href=e.linkUrl,l.classList.add(s.anchor),r.appendChild(o),r.appendChild(n),r.appendChild(i),r.appendChild(l),r}function o(e){var r=t(),n=document.createElement("IMG"),o=document.createElement("DIV"),i=document.createElement("DIV"),l=document.createElement("DIV"),a=document.createElement("A");return r.classList.add(s.linkHolder,s.holderWithBigCover),r.dataset.style="bigCover",n.src=e.image,n.classList.add(s.cover,s.bigCover),o.textContent=e.title,o.classList.add(s.embedTitle),l.textContent=e.description,l.classList.add(s.description),a.textContent=e.linkText,a.href=e.linkUrl,a.classList.add(s.anchor),i.classList.add(s.contentWrapper),i.appendChild(o),i.appendChild(l),i.appendChild(a),r.appendChild(n),r.appendChild(i),r}function i(){var e=document.createElement("DIV");return e.classList.add(s.linkSettings),e}function l(e,t){var r=document.createElement("SPAN");return r.textContent=e[t],r.classList.add(s.linkSettingsItem),r}function a(){var e=document.createElement("LABEL");return e.classList.add(s.labelProgress),e}function c(){var e=document.createElement("LABEL");return e.classList.add(s.labelError),e}function d(e){var t=e||codex.editor.content.currentNode,r=t.querySelector("."+s.linkHolder),n=t.querySelector("."+s.embedTitle),o=t.querySelector("."+s.cover),i=t.querySelector("."+s.description),l=t.querySelector("."+s.anchor),a={};return a.style=r.dataset.style,a.image=o.src,a.title=n.textContent,a.description=i.innerHTML,a.linkText=l.innerHTML,a.linkUrl=l.href,a}var s={linkHolder:"link-holder",holderWithSmallCover:"link-holder--small-cover",holderWithBigCover:"link-holder--big-cover",contentWrapper:"link-holder-wrapper",embedTitle:"link-holder__title",cover:"link-holder__cover",smallCover:"link-holder__cover--small",bigCover:"link-holder__cover--big",description:"link-holder__description",anchor:"link-holder__anchor",inputElement:"link-holder__input",labelProgress:"link-holder__label--progress",labelError:"link-holder__label--error",linkSettings:"link-settings",linkSettingsItem:"link-settings__item"};return r(7),{drawInput:e,drawProgressLabel:a,drawErrorLabel:c,drawLinkHolder:t,drawEmbedWithSmallCover:n,drawEmbedWithBigCover:o,drawSettingsHolder:i,drawSettingsItem:l,getDataFromHTML:d}}()},function(e,t,r){"use strict";e.exports=function(){function e(e){var t=void 0;if(e&&e.style)switch(e.style){case"smallCover":t=n.drawEmbedWithSmallCover(e);break;case"bigCover":t=n.drawEmbedWithBigCover(e)}else{var r=void 0;t=n.drawLinkHolder(),r=n.drawInput(),r.addEventListener("paste",o.URLPasted.bind(r)),t.appendChild(r)}return t}function t(t){return e(t)}return t}();var n=r(0),o=r(5)},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e.config=null,e.prepare=function(t){return new Promise(function(r,o){"object"===(void 0===t?"undefined":n(t))&&t.fetchURL?(e.config=t,r()):o("Cant initialize plugin without fetch server")})},e}({})},function(e,t,r){"use strict";e.exports=function(){function e(e){var t={tags:{}},r={tags:{p:{}}},n={tags:{p:{},a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{}}};return"bigCover"===e.style&&"smallCover"===e.style||(e.style="smallCover"),e.title=codex.editor.sanitizer.clean(e.title,r),e.description=codex.editor.sanitizer.clean(e.description,n),e.linkText=codex.editor.sanitizer.clean(e.linkText,t),e.linkUrl=codex.editor.sanitizer.clean(e.linkUrl,t),e.image=codex.editor.sanitizer.clean(e.image,t),e}function t(t){return e(n.getDataFromHTML(t))}return t}();var n=r(0)},function(e,t,r){"use strict";e.exports=function(){function e(){var e=n.drawSettingsHolder(),r={smallCover:"Маленькая обложка",bigCover:"Большая обложка"};for(var o in r){var i=n.drawSettingsItem(r,o);e.appendChild(i),i.dataset.style=o,i.addEventListener("click",t)}return e}function t(){var e=codex.editor.content.currentNode;switch(this.dataset.style){case"smallCover":r(e);break;case"bigCover":i(e)}codex.editor.toolbar.settings.close()}function r(e){var t=n.getDataFromHTML(),r=void 0;t.style="smallCover",r=o(t),codex.editor.content.switchBlock(e,r)}function i(e){var t=n.getDataFromHTML(),r=void 0;t.style="bigCover",r=o(t),codex.editor.content.switchBlock(e,r)}return e}();var n=r(0),o=r(1)},function(e,t,r){"use strict";e.exports=function(){function e(e){var n=this,i=void 0,a=void 0;i=e.clipboardData||window.clipboardData,a=i.getData("Text"),n.classList.remove("link-holder__label--error"),codex.editor.core.ajax({url:o.config.fetchURL+"?url="+a,type:"GET",beforeSend:t.bind(n),success:r.bind(n),error:l.bind(n)})}function t(){var e=this,t=1;c=n.drawProgressLabel(),c.style.width=15*t+"%",a=window.setInterval(function(){t++,c.style.width=15*t+"%"},400),e.parentNode.insertBefore(c,e)}function r(e){window.clearInterval(a);var t=codex.editor.content.currentNode,r=void 0,n=void 0;try{r=JSON.parse(e),r.style=o.config.defaultStyle,n=i(r),codex.editor.content.switchBlock(t,n)}catch(e){c.remove(),l.call(this)}}function l(e){this.classList.add("link-holder__label--error")}var a=null,c=null;return{URLPasted:e}}();var n=r(0),o=r(2),i=r(1)},function(e,t,r){"use strict";e.exports=function(){var e=r(1),t=r(3),n=r(4);return{prepare:r(2).prepare,render:e,save:t,settings:n}}()},function(e,t){}]);