var cdxEditorLink=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";e.exports=function(){function e(){var e=document.createElement("INPUT");return e.type="input",e.classList.add(a.inputElement),e.placeholder="Paste Link...",e}function t(){var e=document.createElement("DIV");return e.classList.add(a.linkHolder),e}function r(e){var n=t(),r=document.createElement("DIV"),i=document.createElement("DIV"),o=document.createElement("DIV"),l=document.createElement("A");switch(n.dataset.style=e.style,n.classList.add(a.linkHolder,a.linkRendered),i.classList.add(a.cover),i.style.backgroundImage='url("'+e.image+'")',r.textContent=e.title,r.classList.add(a.embedTitle),o.textContent=e.description,o.classList.add(a.description),l.textContent=e.linkText,l.href=e.linkUrl,l.classList.add(a.anchor),n.appendChild(i),e.style){case"smallCover":n.classList.add(a.linkWithSmallCover),i.classList.add(a.smallCover),n.appendChild(r),n.appendChild(o),n.appendChild(l);break;case"bigCover":i.classList.add(a.bigCover),n.classList.add(a.linkWithBigCover);var c=document.createElement("DIV");c.classList.add(a.contentWrapper),c.appendChild(r),c.appendChild(o),c.appendChild(l),n.appendChild(c)}return n}function i(){var e=document.createElement("DIV");return e.classList.add(a.linkSettings),e}function o(e,t){var n=document.createElement("SPAN");return n.textContent=e[t],n.classList.add(a.linkSettingsItem),n}function l(){var e=document.createElement("LABEL");return e.classList.add(a.label),e}function c(e){var t=codex.editor.content.currentNode,n=e||t.querySelector("."+a.linkHolder),r=n.querySelector("."+a.embedTitle),i=n.querySelector("."+a.cover),o=i.style.backgroundImage.match(/http?.[^"]+/),l=n.querySelector("."+a.description),c=n.querySelector("."+a.anchor),s={};return s.style=n.dataset.style,s.image=o,s.title=r.textContent,s.description=l.innerHTML,s.linkText=c.innerHTML,s.linkUrl=c.href,s}var a={linkHolder:"cdx-link-tool",linkRendered:"cdx-link-tool--rendered",linkWithBigCover:"cdx-link-tool--bigCover",linkWithSmallCover:"cdx-link-tool--smallCover",contentWrapper:"cdx-link-tool-wrapper",embedTitle:"cdx-link-tool__title",cover:"cdx-link-tool__cover",smallCover:"cdx-link-tool__cover--small",bigCover:"cdx-link-tool__cover--big",description:"cdx-link-tool__description",anchor:"cdx-link-tool__anchor",inputElement:"cdx-link-tool__input",label:"cdx-link-tool__label",labelLoading:"cdx-link-tool__label--loading",labelFinish:"cdx-link-tool__label--finish",labelError:"cdx-link-tool__label--error",linkSettings:"link-settings",linkSettingsItem:"link-settings__item",settingsItemActive:"link-settings__item--active"};return n(7),{css:a,drawInput:e,drawLabel:l,drawLinkHolder:t,drawEmbed:r,drawSettingsHolder:i,drawSettingsItem:o,getDataFromHTML:c}}()},function(e,t,n){"use strict";e.exports=function(){function e(e){var t=void 0;if(e&&e.style)t=r.drawEmbed(e);else{var n=void 0;t=r.drawLinkHolder(),n=r.drawInput(),n.addEventListener("paste",i.URLPasted.bind(n)),t.appendChild(n)}return t}function t(t){return e(t)}return t}();var r=n(0),i=n(5)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e.config=null,e.prepare=function(t){return new Promise(function(n,i){"object"===(void 0===t?"undefined":r(t))&&t.fetchURL?(e.config=t,n()):i("Cant initialize plugin without fetch server")})},e}({})},function(e,t,n){"use strict";e.exports=function(){function e(e){var t={tags:{}},n={tags:{p:{}}},r={tags:{p:{},a:{href:!0,target:"_blank",rel:"nofollow"},b:{},i:{}}};return"bigCover"!=e.style&&"smallCover"!=e.style&&(e.style="smallCover"),e.title=codex.editor.sanitizer.clean(e.title,n),e.description=codex.editor.sanitizer.clean(e.description,r),e.linkText=codex.editor.sanitizer.clean(e.linkText,t),e.linkUrl=codex.editor.sanitizer.clean(e.linkUrl,t),e.image=codex.editor.sanitizer.clean(e.image,t),e}function t(t){return e(r.getDataFromHTML(t))}return t}();var r=n(0)},function(e,t,n){"use strict";e.exports=function(){function e(){var e=codex.editor.content.currentNode,n=e.querySelector("."+r.css.linkHolder),i=r.drawSettingsHolder(),o={smallCover:"Маленькая обложка",bigCover:"Большая обложка"};for(var l in o){var c=r.drawSettingsItem(o,l);c.dataset.style=l,c.addEventListener("click",t),n.dataset.style==l&&c.classList.add(r.css.settingsItemActive),i.appendChild(c)}return i}function t(){var e=codex.editor.content.currentNode;switch(this.dataset.style){case"smallCover":n(e);break;case"bigCover":o(e)}codex.editor.toolbar.settings.close()}function n(e){var t=r.getDataFromHTML(),n=void 0;t.style="smallCover",n=i(t),codex.editor.content.switchBlock(e,n)}function o(e){var t=r.getDataFromHTML(),n=void 0;t.style="bigCover",n=i(t),codex.editor.content.switchBlock(e,n)}return e}();var r=n(0),i=n(1)},function(e,t,n){"use strict";e.exports=function(){function e(e){var o=this,c=void 0,a=void 0;c=e.clipboardData||window.clipboardData,a=c.getData("Text"),o.classList.remove(r.css.labelError),codex.editor.core.ajax({url:i.config.fetchURL+"?url="+a,type:"GET",beforeSend:t.bind(o),success:n,error:l.bind(o.parentNode)})}function t(){var e=this,t=r.drawLabel();return e.parentNode.insertBefore(t,e),window.setTimeout(function(){t.classList.add(r.css.labelLoading)},50),e.parentNode}function n(e){var t=codex.editor.content.currentNode,n=void 0,c=this.querySelector("."+r.css.labelLoading),a=void 0;c.classList.add(r.css.labelFinish);try{n=JSON.parse(e),n.style=i.config.defaultStyle,n.success||1===n.success?(a=o(n),window.setTimeout(function(){codex.editor.content.switchBlock(t,a)},2500)):l.call(this)}catch(e){l.call(this)}}function l(e){var t=this,n=t.querySelector("."+r.css.label),i=t.querySelector("."+r.css.inputElement);n.remove(),i.classList.add(r.css.labelError)}return{URLPasted:e}}();var r=n(0),i=n(2),o=n(1)},function(e,t,n){"use strict";e.exports=function(){var e=n(1),t=n(3),r=n(4);return{prepare:n(2).prepare,render:e,save:t,settings:r}}()},function(e,t){}]);